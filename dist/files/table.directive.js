!function(){"use strict";nodeApp.directive("nodeTable",["$window","$rootScope","$compile",function(a,b,c){return{link:function(a){return function(d,e,f){if(f){var g={},h=d.tableCtrl,i=function(a){return"string"==typeof a?a.toLowerCase():a},j=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},k=function(f,j){jQuery(e[0]).find("table").remove();var k=a.select(e[0]).append("table").attr("class","table table-responsive table-bordered table-hover table-striped"),l=k.append("thead"),m=k.append("tbody");return l.append("tr").selectAll("th").data(f).enter().append("th").attr("data-sort-direction","dsc").attr("class","table-header").text(function(a){return a}).on("click",function(b){$(".table-popup").remove();var c=a.select(this),d=a.selectAll('th[data-sort-direction="asc"]');jQuery(this).find(">.sort").trigger("focus"),"asc"===c.attr("data-sort-direction")?(d.attr("data-sort-direction","dsc"),g.selectAll("tbody tr").sort(function(a,c){return i(a[b])>i(c[b])?-1:i(a[b])<i(c[b])?1:0}),d.selectAll("i").attr("class","glyphicon glyphicon-chevron-up"),c.attr("data-sort-direction","dsc"),c.select("i").attr("class","glyphicon glyphicon-chevron-up")):(d.attr("data-sort-direction","dsc"),g.selectAll("tbody tr").sort(function(a,c){return i(a[b])>i(c[b])?1:i(a[b])<i(c[b])?-1:0}),d.selectAll("i").attr("class","glyphicon glyphicon-chevron-up"),c.attr("data-sort-direction","asc"),c.select("i").attr("class","glyphicon glyphicon-chevron-down"))}).append("span").attr("class","sort pull-right").attr("ng-focus","dirCtrl.sortFn($event)").append("i").attr("class","glyphicon glyphicon-chevron-up"),m.selectAll("tr").data(j).enter().append("tr").attr("class","inactive").on("click",function(e){a.event;$(".table-popup").remove(),$(this).after(c($("#popup").html())(d)),a.select("tr.active").attr("class","inactive"),a.select(this).attr("class","active"),h.popupData=e,b.$apply(h)}).selectAll("td").data(function(a){return f.map(function(b){return{column:b,value:a[b]}})}).enter().append("td").attr("class",function(a){return a.column}).text(function(a){return a.value}),k},l=function(a,b){for(var c=a*b,d=["Indian (India)","American (USA)","Canadian (Canada)","Emirati (UAE)","Australian (Australia)","British (UK)","Swiss (Switzerland)"],e=["Married","Single","Divorcee"],f=["Novice","Ninja","Intermediate"],g=["Male","Female","Gay","Lesbian"],h=["MCA","M.Tech","ME","MS","B.Tech","BE","BS","Ph.D"],i=["Engineer","Professor"],k={headers:["id","name","gender","age","status","profession"],data:[]},l=c-a|1;l<=c;l++)k.data.push({id:l,name:"Lorem Ipsum-"+l,gender:g[j(0,g.length-1)],age:j(23,32),nationality:d[j(0,d.length-1)],status:e[j(0,e.length-1)],experience:f[j(0,f.length-1)],profession:i[j(0,i.length-1)],qualification:h[j(0,h.length-1)],pin:Math.floor(1e6*Math.random())});return k},m=function(){var b=parseInt(h.pageSize,10),c=parseInt(h.pageNumber,10),d=l(b,c),e=a.select("th[data-sort-direction]:first-child");d.data.sort(function(b,c){return a.ascending(b.id,c.id)}),g=k(d.headers,d.data),e.attr("data-sort-direction","asc"),e.select("i").attr("class","glyphicon glyphicon-chevron-down")};b.$on("changeValue",function(){m()}),m()}}}(a.d3),restrict:"E",scope:!1}}])}();